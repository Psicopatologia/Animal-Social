<% title = __("businesses") %>
<!DOCTYPE html>
<html lang="<%= locale %>">

<head>
    <% include ../partials/head %>
    <style>
        .card:hover {
            box-shadow: 0 0 2px 0 #4592af;
            transform: scale(1.01);
        }
    </style>
</head>

<body>
    <header>
        <% include ../partials/header %>
    </header>
    <main class="container mt-4">
        <div class="row">
            <% for (var i = 0; i < business.length; i++) { %>
            <div class="col-md-4 mb-4">
                <div class="card" style="height: 100%">
                    <div class="card-body">
                        <h5 class="card-title">
                            <a class="stretched-link" href="/b/<%= business[i].id %>"><%= business[i].name %></a>
                        </h5>
                        <h6 class="card-subtitle mb-2 text-muted">
                            <%= business[i].address.city %> -
                            <%= business[i].address.address %>
                        </h6>
                        <p class="card-text">
                            <%= business[i].info %>
                        </p>
                    </div>
                </div>
            </div>
            <% } %>
        </div>
        <% if (pages > 0) { %>
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center mb-4">
                <% if (current == 1) { %>
                <li class="page-item disabled">
                    <a href="/b/" class="page-link">&laquo;</a>
                </li>
                <% } else { %>
                <li class="page-item">
                    <a href="/b/<%= current-1 %>" class="page-link">&laquo;</a>
                </li>
                <% } %>
                <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                <% if (i !== 1) { %>
                <li class="page-item">
                    <a href="/b/" class="page-link">1</a>
                </li>
                <li class="page-item disabled">
                    <a href="#" class="page-link">...</a>
                </li>
                <% } %>
                <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                <% if (i == current) { %>
                <li class="page-item active">
                    <a href="#" class="page-link"><%= i %></a>
                </li>
                <% } else { %>
                <li class="page-item">
                    <a href="/b/<%= i %>" class="page-link"><%= i %></a>
                </li>
                <% } %>
                <% if ( i == (Number(current) + 4) && i < pages) { %>
                <li class="page-item disabled">
                    <a href="#" class="page-link">...</a>
                </li>
                <li class="page-item">
                    <a href="/b/<%= pages %>" class="page-link"><%= pages %></a>
                </li>
                <% } %>
                <% } %>
                <% if (current == pages) { %>
                <li class="page-item disabled">
                    <a href="#" class="page-link">&raquo;</a>
                </li>
                <% } else { %>
                <li class="page-item">
                    <a href="/b/<%= Number(current) + 1 %>" class="page-link">&raquo;</a>
                </li>
                <% } %>
            </ul>
        </nav>
        <% } %>
    </main>
    <% include ../partials/foot %>
</body>

</html>